<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Transitions</title>
    <meta name="description" content="A collection of components that make it easy to build interactive charts with D3.">

    <script src="https://d3fc.io/scripts.js"></script>

    <link rel="icon" type="image/png" href="https://d3fc.io/images/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="https://d3fc.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://d3fc.io/images/favicon-96x96.png" sizes="96x96">
    <link rel="stylesheet" href="https://d3fc.io/styles.css" />
    <link rel="canonical" href="https://d3fc.io/components/introduction/transitions.html" />
  </head>
  <body>
    <div class="content">

      <nav class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
              <a href="https://d3fc.io/"><img class="navbar-logo" alt="d3fc" src="https://d3fc.io/images/logo.svg" /></a>
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav navbar-right">
                <li class="active"><a href="https://d3fc.io/components/introduction/getting-started.html">Documentation</a></li>
                <li class=""><a href="https://d3fc.io/components/chart/cartesian.html">Components</a></li>
                <li class=""><a href="https://d3fc.io/components/series/candlestick.html">Financial</a></li>
                <li class=""><a href="https://d3fc.io/examples">Examples</a></li>
                <li><a href="https://github.com/ScottLogic/d3fc">GitHub</a></li>
              </ul>
            </div>
        </div>
      </nav>

      <div class="container component">
  <div class="row">

    <div class="col-sm-9 col-xs-12">
      <h1>
        Transitions
      </h1>
      <p>D3 has built-in support for transitions allowing you to animate changes to the DOM or SVG. When combined with a data-join this feature allows you to easily animate a visualisation based on changes to the underlying data.</p>
<p>The transition API is very easy to use, you simply change a selection into a transition as follows:</p>
<pre><code>d3.<span class="hljs-keyword">select</span>(<span class="hljs-string">"body"</span>)
  .transition()
  .style(<span class="hljs-string">"color"</span>, <span class="hljs-string">"red"</span>)<span class="hljs-comment">;</span>
</code></pre><p>For a detailed introduction to transitions, take a look at the <a href="https://github.com/mbostock/d3/wiki/Transitions">API documentation</a> or <a href="http://bost.ocks.org/mike/transition/">Working with Transitions</a>.</p>
<p>All of the d3fc components have been implemented in order to work with transitions. What this means is that they will perform logical animations on enter, update or exit (for example bars animate upwards from the baseline on enter). In order for a series component to transition correctly you need to supply a key-function, via the <code>key</code> property, this is equivalent to the key function that you supply when performing a data-join via <a href="https://github.com/mbostock/d3/wiki/Selections#data">selection.data</a>. The key-function is used to determine the &#39;identity&#39; of each datapoint, if the array of data that is used to render a series is re-ordered, the key-function allows the series to perform a suitable transition.</p>
<p>The following example shows transitions in action, where the code indicated below converts the selection into a transition before &#39;calling&#39; the chart component:</p>
<pre><code>d3.<span class="hljs-keyword">select</span>(<span class="hljs-string">'#transitions-chart'</span>)
    .datum(<span class="hljs-built_in">data</span>)
    .transition()  <span class="hljs-comment">// convert the selection into a transition</span>
    .<span class="hljs-built_in">duration</span>(<span class="hljs-number">500</span>) <span class="hljs-comment">// set the duration (you can also set the easing function)</span>
    .call(chart);
</code></pre><p>The above code can be repeatedly executed, with the chart (and associated series) transitioning as the data changes.</p>
<p>Here is the complete example which animates a simple bubble sort algorithm (if the example has finished, just refresh your browser!):</p>
<style type="text/css">
.x-axis {
  display: none
}

</style>

<div class="codepen-link">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank">
    <input type="text" name="data" hidden="true"
      value='{
        "html":"&lt;div id&#x3D;\&quot;transitions-chart\&quot; class&#x3D;\&quot;chart\&quot;&gt; &lt;/div&gt;\n",
        "js": "// generate some random data\nvar data = d3.range(40).map(Math.random);\n\n// render a bar series via the cartesian chart component\nvar barSeries = fc.series.bar()\n    .key(fc.util.fn.identity)\n    .xValue(fc.util.fn.index)\n    .yValue(fc.util.fn.identity);\n\nvar chart = fc.chart.cartesian(\n              d3.scale.linear(),\n              d3.scale.linear())\n    .xDomain([-1, data.length])\n    .margin({top: 10, bottom: 10, right: 30})\n    .plotArea(barSeries);\n\nvar index = 0;\nfunction render() {\n    if (index === data.length) {\n        return; // we\"re all done!\n    }\n\n    // perform a single iteration of the bubble sort\n    var temp;\n    for (var j = index; j > 0; j--) {\n        if (data[j] < data[j - 1]) {\n            temp = data[j];\n            data[j] = data[j - 1];\n            data[j - 1] = temp;\n        }\n    }\n    index++;\n\n    // re-render the chart\n    d3.select(\"#transitions-chart\")\n        .datum(data)\n        .transition()\n        .duration(500)\n        .call(chart);\n}\n\nsetInterval(render, 1000);\nrender();\n",
        "css": ".chart {\n    margin: 10px 0;\n    width: 100%;\n    height: 250px;\n}\n\n.chart&gt;svg {\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.chart.large {\n    height: 400px;\n}\n.x-axis {\n  display: none\n}\n",
        "js_external": "https://d3fc.io/d3fc.bundle.js",
        "css_external": "https://d3fc.io/d3fc.css"}
      '/>
    <input type="submit" class="btn btn-default" value="Codepen"/>
  </form>
</div>


<div id="transitions-chart" class="chart"> </div>

<script type="text/javascript">
// generate some random data
var data = d3.range(40).map(Math.random);

// render a bar series via the cartesian chart component
var barSeries = fc.series.bar()
    .key(fc.util.fn.identity)
    .xValue(fc.util.fn.index)
    .yValue(fc.util.fn.identity);

var chart = fc.chart.cartesian(
              d3.scale.linear(),
              d3.scale.linear())
    .xDomain([-1, data.length])
    .margin({top: 10, bottom: 10, right: 30})
    .plotArea(barSeries);

var index = 0;
function render() {
    if (index === data.length) {
        return; // we're all done!
    }

    // perform a single iteration of the bubble sort
    var temp;
    for (var j = index; j > 0; j--) {
        if (data[j] < data[j - 1]) {
            temp = data[j];
            data[j] = data[j - 1];
            data[j - 1] = temp;
        }
    }
    index++;

    // re-render the chart
    d3.select('#transitions-chart')
        .datum(data)
        .transition()
        .duration(500)
        .call(chart);
}

setInterval(render, 1000);
render();

</script>

<p>And here is the full sourcecode for this example (which is mostly the bubble-sort and associated boiler-plate code):</p>
<pre><code class="lang-js"><span class="hljs-comment">// generate some random data</span>
var data = d3.range(<span class="hljs-number">40</span>).map(Math.random)<span class="hljs-comment">;</span>

<span class="hljs-comment">// render a bar series via the cartesian chart component</span>
var barSeries = fc.series.bar()
    .key(fc.util.fn.identity)
    .xValue(fc.util.fn.index)
    .yValue(fc.util.fn.identity)<span class="hljs-comment">;</span>

var chart = fc.chart.cartesian(
              d3.scale.linear(),
              d3.scale.linear())
    .xDomain([<span class="hljs-number">-1</span>, data.<span class="hljs-keyword">length</span>])
    .margin({top: <span class="hljs-number">10</span>, bottom: <span class="hljs-number">10</span>, right: <span class="hljs-number">30</span>})
    .plotArea(barSeries)<span class="hljs-comment">;</span>

var index = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
function render() {
    <span class="hljs-keyword">if</span> (index === data.<span class="hljs-keyword">length</span>) {
        <span class="hljs-keyword">return</span><span class="hljs-comment">; // we're all done!</span>
    }

    <span class="hljs-comment">// perform a single iteration of the bubble sort</span>
    var temp<span class="hljs-comment">;</span>
    <span class="hljs-keyword">for</span> (var j = index<span class="hljs-comment">; j &gt; 0; j--) {</span>
        <span class="hljs-keyword">if</span> (data[j] &lt; data[j - <span class="hljs-number">1</span>]) {
            temp = data[j]<span class="hljs-comment">;</span>
            data[j] = data[j - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
            data[j - <span class="hljs-number">1</span>] = temp<span class="hljs-comment">;</span>
        }
    }
    index++<span class="hljs-comment">;</span>

    <span class="hljs-comment">// re-render the chart</span>
    d3.select(<span class="hljs-string">'#transitions-chart'</span>)
        .datum(data)
        .transition()
        .duration(<span class="hljs-number">500</span>)
        .call(chart)<span class="hljs-comment">;</span>
}

setInterval(render, <span class="hljs-number">1000</span>)<span class="hljs-comment">;</span>
render()<span class="hljs-comment">;</span>
</code></pre>


      <nav class="visible-xs-block">
        <ul class="pager">
            <li class="previous"><a href="/components/introduction/decorate-pattern.html"><span aria-hidden="true">&larr;</span> Decorate Pattern</a></li>
        </ul>
      </nav>
    </div>

    <nav class="col-sm-3 hidden-xs">
      <ul class="nav nav-stacked fixed nav-sidebar">
          <li>
            <h4>Introduction</h4>
            <ul class="nav nav-stacked">
                <li class="">
                  <a href="/components/introduction/getting-started.html">
                    Getting Started
                  </a>
                </li>
                <li class="">
                  <a href="/components/introduction/building-a-chart.html">
                    Building A Chart
                  </a>
                </li>
            </ul>
          </li>
          <li>
            <h4>Further Reading</h4>
            <ul class="nav nav-stacked">
                <li class="">
                  <a href="/components/introduction/component-design.html">
                    Component Design
                  </a>
                </li>
                <li class="">
                  <a href="/components/introduction/decorate-pattern.html">
                    Decorate Pattern
                  </a>
                </li>
                <li class="active">
                  <a href="/components/introduction/transitions.html">
                    Transitions
                  </a>
                </li>
            </ul>
          </li>
      </ul>
    </nav>

  </div>
</div>


    </div>
    <footer>
      <div class="container">
        <p class="muted credit text-center">Project supported by <a href="http://www.scottlogic.com">Scott Logic</a>.</p>
        <p class="muted credit text-center">Browser testing provided by <a class="browserstack" href="https://browserstack.com">BrowserStack</a>.</p>
      </div>
    </footer>

  </body>
</html>
